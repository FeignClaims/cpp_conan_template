# An example on how to specialize a conan profile for the corresponding github action job
#
# The specialization sets `detect_api.detect_gcc_compiler("gcc-13")` to search the gcc compiler since macos aliases
#   clang as "gcc"
{% set compiler, version, compiler_exe = detect_api.detect_gcc_compiler("gcc-13") %}
{% set libcxx = detect_api.detect_libcxx(compiler, version, compiler_exe) %}
{% set converted_version = detect_api.default_compiler_version(compiler, version) %}
{% set arch = detect_api.detect_arch() %}
{% set os = detect_api.detect_os() %}

[settings]
arch={{ arch }}
compiler={{ compiler }}
compiler.cppstd=20
compiler.libcxx={{ libcxx }}
compiler.version={{ converted_version }}
os={{ os }}

[conf]
&:tools.cmake.cmaketoolchain:generator=Ninja Multi-Config
tools.system.package_manager:mode=install
tools.system.package_manager:sudo=True